---
title: "Pesca - Desembarques de capturas marítimas"
author: "Leonel Fernando Cejas"
output: html_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(dplyr)
library(readr)
library(ggplot2)
library(lubridate)
library(tidyverse)


```

**Introducción**


El trabajo se realiza a partir de bases de datos brindados por el sitio web 
https://www.datos.gob.ar/ . Los datos del presente informe fueron provistos por
la Subsecretaría de Pesca y Acuicultura de la República Argentina.
Comprenden las capturas pesqueras realizadas por buques que operan dentro de la
ZEE de la República Argentina en el período de 2010 a 2018.




** En primer lugar hacemos una exploración de los datos y seguidamente asignamos 
a una variable la base de datos completa con la que elegí trabajar**


```{r}
captura_puerto_flota_2010_2018 <- read_csv("datos/captura-puerto-flota-2010-2018.csv", 
                                           locale = locale(encoding = "windows-1252"))
```



```{r}
str(captura_puerto_flota_2010_2018)
```

Debido a que la variable "fecha" se encuentra en formato de caracteres se 
procede a convertirla a formato fecha


```{r}
captura_puerto_flota_2010_2018 <-
  captura_puerto_flota_2010_2018 |> 
  mutate(fecha = ym (fecha))
  
```


La base de datos contiene 41341 observaciones y 13 variables.
Las variables se mencionan a continuación: 


```{r}
colnames(captura_puerto_flota_2010_2018)
```
         

**Especies del Mar Argentino**

```{r}
lista_de_especies <-
  unique(captura_puerto_flota_2010_2018$especie) |> 
  print()
```
Se observan un total 89 especies marítimas. Al ser demasiadas,  dificulta el 
análisis y la visualización de los datos. Por ende, se opta por un número de
especies mas reducido y representativo. Tomamos las primeras diez especies y le 
agregamos la especie "Merluza negra" por ser  de suma importancia comercial
y científica, además de estar regulada regulada por la FAO.

** Principales 10 especies en descargas **

```{r}
captura_puerto_flota_2010_2018_2<-
  captura_puerto_flota_2010_2018 |> 
  mutate(especie = fct_lump(especie, n = 10)) |> 
  filter(especie != "other") |> 
  count(especie, sort = TRUE) |> 
  print()
```



```{r}
especies_repre <-
  captura_puerto_flota_2010_2018 |> 
  filter (especie %in% c("Merluza hubbsi", "Rayas nep", "Pez gallo", "Lenguados nep", "Pescadilla", "Langostino", "Gatuzo", "Corvina blanca", "Mero","Merluza negra"))
  
```
  El siguiente cuadro nos muestra la variación del la captura de las principales
  especies durante el período de estudio. 

```{r}

  ggplot(data = especies_repre, mapping = aes(x = fecha, y = captura)) + 
  geom_line (aes(colour = especie))+
  labs(title = "Capturas Marítimas de las principales especies argentinas",
       subtitle = "Desde 2010 hasta 2018",
       x = "Año",
       y = "Captura")
```


Principales especies con su volumen de captura en kilogramos. Se destaca el
principal recurso marítimo de la plataforma continental argentina, la merluza 
común o merluza hubbsi.Con picos históricos de captura en 2013 y 2018.



```{r}
esp_repre_kilos<-
  especies_repre |>
  mutate(total_puerto = sum(captura, na.rm = TRUE)) |> 
  group_by(especie) |>
  summarise(total_especie = sum(captura)) |> 
  print()
```



```{r}
repre_esp_tot<-
  esp_repre_kilos |> 
  mutate(captura_total= sum(total_especie, na.rm = TRUE)) |> 
  mutate(especie_sobre_total = total_especie/captura_total) |> 
  arrange(-especie_sobre_total) |> 
  print()

```


Se observa una preponderancia de los puertos de la provincia de Buenos Aires, 
destacándose, sobre todo, el Puerto de Mar Del Plata.
Mar del Plata es el puerto mas grande del país y uno de los mas importantes de 
Sudamérica.


```{r}
pu<-
especies_repre %>% 
  group_by(puerto) %>% 
  summarise(captura = sum(captura))
```

**El siguiente cuadro nos muestra la captura total en kilogramos según el puerto
donde se produjo la descarga** 
Se destaca , por lejos, el puerto de Mar del Plata.
Esta asimetría en el destino que los buques usan para descargar lo capturado ha 
provocado el pedido y el reclamo de los puertos patagónicos de una distribución
mas equitativa, ya que el puerto en el cual se descargan las especies capturadas
es de suma importancia para la economía y la generación de empleo local.

```{r}
  pu |>
  ggplot(aes(captura, puerto))+ 
  geom_col() 
```

Por último se puede observar una menor variedad en la cantidad especies que 
descargan en los puertos patagónicos. Los puertos bonaerense presentan la
mayor diversificación.

```{r}
for_puerto<-
  especies_repre %>%
  group_by(puerto)%>%
  count(especie)
```

```{r}
data_count<-  for_puerto %>%

  summarise(count = n_distinct(especie))
```



```{r}
for (g in unique(for_puerto$puerto)) {
    miembros <- filter(for_puerto, puerto == g)


  print(paste("El puerto de", g, "registra una captura de", nrow(miembros), "especie/s"))}
```

